function k(a,b,c){++a.h;const d=new Image;d.onload=()=>{++a.i;a.H.set(b,d)};d.src=c}class aa{constructor(){this.h=this.i=0;this.loaded=()=>this.i>=this.h;this.l=()=>0==this.h?1:this.i/this.h;this.H=new Map;this.M=new Map}s(a){return this.H.get(a)}};class ba{get la(){return this.canvas.width}get ka(){return this.canvas.height}constructor(a,b,c,d,e,f){this.m=1;this.input=a;this.K=b;this.L=c;this.canvas=d;this.transition=e;this.audio=f}};function r(a){a.x=0;a.y=0;a.z=0;a.w=0}class x{constructor(a=0,b=0,c=0,d=0){this.h=()=>new x(this.x,this.y,this.z,this.w);this.x=a;this.y=b;this.z=c;this.w=d}get length(){return Math.hypot(this.x,this.y,this.z,this.w)}};const y=(a,b)=>{b|=0;return((a|0)%b+b)%b};function ca(a,b,c,d=!0){let e=void 0;d&&(e=document.createElement("div"),e.id="d",e.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;"));a.canvas=document.createElement("canvas");a.canvas.setAttribute("style","position: absolute;z-index: -1;image-rendering: optimizeSpeed;image-rendering: pixelated;image-rendering: -moz-crisp-edges;");a.canvas.width=b;a.canvas.height=c;d&&(e.appendChild(a.canvas),document.body.appendChild(e));a.u=a.canvas.getContext("2d");a.u.imageSmoothingEnabled=
!1;a.u.globalAlpha=1}function z(a){var b=window.innerWidth,c=window.innerHeight,d=b/c;let e,f;d>=a.l/a.i?(e=Math.round(d*a.i),d=a.i,f=c/a.i):(e=a.l,d=Math.round(a.l/d),f=b/a.l);e=Math.min(e,a.v)|0;d=Math.min(d,a.o)|0;a.canvas.width=e;a.canvas.height=d;a.canvas.style.width=String(e*f|0)+"px";a.canvas.style.height=String(d*f|0)+"px";a.canvas.style.left=String(b/2-f*e/2|0)+"px";a.canvas.style.top=String(c/2-f*d/2|0)+"px"}function A(a,b=1){a.u.globalAlpha=Math.max(0,Math.min(b,1))}
function B(a,b,c,d){b=b+a.G.x|0;c=c+a.G.y|0;for(let f=-d;f<=d;++f){var e=f/d;e=Math.round(Math.sqrt(1-e*e)*d);0>=e||a.u.fillRect(b-e,c+f,2*e,1)}}
function da(a,b,c=a.width/2,d=a.height/2){c=c+a.G.x|0;d=d+a.G.y|0;var e=Math.max(0,d-b)|0;const f=Math.min(a.height,d+b)|0;0<e&&a.fillRect(0,0,a.width,e);for(f<a.height&&a.fillRect(0,f,a.width,a.height-f);e<f;++e){var h=e-d;if(Math.abs(h)>=b){a.u.fillRect(0,e,a.width,1);continue}const g=Math.round(c-Math.sqrt(b*b-h*h));h=Math.round(c+Math.sqrt(b*b-h*h));0<g&&a.u.fillRect(0,e,g,1);h<a.width&&a.u.fillRect(h,e,a.width-g,1)}}
function C(a,b,c=0,d=0,e=0,f=0,h=0,g=b?.width??1,l=b?.height??1,m=g,n=l,q=g/2,p=l/2,u){if(void 0!==b){d=d+a.G.x|0;e=e+a.G.y|0;f|=0;h|=0;g|=0;l|=0;d|=0;e|=0;a=a.u;var t=0!=c||void 0!==u;t&&a.save();0!=(c&1)&&(a.translate(g,0),a.scale(-1,1),d*=-1);0!=(c&2)&&(a.translate(0,l),a.scale(1,-1),e*=-1);void 0!==u&&(a.translate(q+d|0,p+e|0),a.rotate(-u+Math.PI/2),d=-q,e=-p);a.drawImage(b,f,h,g,l,d,e,m,n);t&&a.restore()}}
function D(a,b,c,d,e,f=0,h=0,g=0){if(void 0!==b){var l=b.width/16|0;d=d+a.G.x|0;e=e+a.G.y|0;var m=d;1==g?m=d-=c.length*(l+f)/2|0:2==g&&(m=d-=(c.length+1)*(l+f)|0);for(g=0;g<c.length;++g){const n=c.charCodeAt(g);10==n?(m=d,e+=1*(l+h)):(C(a,b,0,m,e,n%16*l,((n/16|0)-2)*l,l,l,l,l),m+=1*(l+f))}}}
class E{get width(){return this.canvas.width}get height(){return this.canvas.height}constructor(a,b,c=a,d=b,e,f=!1){this.G=new x;this.s=void 0;this.h=()=>this.canvas;this.l=a;this.v=c;this.i=b;this.o=d;this.s=e;ca(this,a,b,f);f&&(z(this),window.addEventListener("resize",()=>z(this)))}clear(a){const b=this.u;b.fillStyle=a;b.fillRect(0,0,this.width,this.height)}setFillColor(a="#ffffff"){this.u.fillStyle=a}fillRect(a=0,b=0,c=this.width,d=this.height){a=a+this.G.x|0;b=b+this.G.y|0;this.u.fillRect(a,b,
c|0,d|0)}moveTo(a=0,b=0){this.G.x=a;this.G.y=b}};function F(a,b,c){a.keys.get(b)!==c-2&&(a.keys.set(b,c),a.h||(a.h=!!(c&1)))}function G(a,b,c){a.actions.set(b,Array.from(c));a.i.push(...c)}function H(a,b){b=a.actions.get(b);if(void 0===b)return 0;for(const c of b)if(b=a.keys.get(c)??0,0!=b)return b;return 0}
class ea{get ra(){return this.h}constructor(){this.h=!1;this.keys=new Map;this.i=[];this.actions=new Map;window.addEventListener("keydown",a=>{this.i.includes(a.code)&&a.preventDefault();F(this,a.code,3)});window.addEventListener("keyup",a=>{this.i.includes(a.code)&&a.preventDefault();F(this,a.code,2)});window.addEventListener("mousedown",()=>{window.focus()});window.addEventListener("mousemove",()=>{window.focus()});window.addEventListener("contextmenu",a=>a.preventDefault())}update(){for(const a of this.keys.keys()){const b=
this.keys.get(a)??0;1<b&&this.keys.set(a,b-2)}this.h=!1}};function I(a,b,c,d=!0){a.K[b]=c;if(void 0===a.h||d)a.h=c}class fa{get i(){return this.h}constructor(){this.h=void 0;this.K=new Map}};function J(a,b,c,d,e,f="#000000",h){a.i=b;a.speed=d;a.h=1;a.o=e;a.l=c;a.color=f;a.aa=h;a.active=!0}
class ha{constructor(){this.h=1;this.i=!1;this.l=0;this.active=!1;this.speed=1;this.color="";this.o=this.aa=void 0;this.isActive=()=>this.active}update(a){this.active&&(this.h-=this.speed*a.m,0>=this.h&&((this.i=!this.i)?(this.active=!1,this.h=0):(this.h+=1,this.o?.(a))))}I(a){if(this.active&&0!=this.l){a.moveTo();var b=this.i?1-this.h:this.h;switch(this.l){case 1:a.setFillColor(this.color);A(a,b);a.fillRect(0,0,a.width,a.height);A(a);break;case 2:const c=this.aa??new x(a.width/2,a.height/2);b=(1-
b)*(1-b)*Math.max(Math.hypot(c.x,c.y),Math.hypot(a.width-c.x,c.y),Math.hypot(a.width-c.x,a.height-c.y),Math.hypot(c.x,a.height-c.y));a.setFillColor(this.color);da(a,b,c.x,c.y)}}}};class ia{constructor(a,b,c,d,e,f=1){this.i=0;this.l=void 0;this.u=a;this.h=Array.from(b);this.o=c;this.type=d;this.v=e;this.i=f}play(a){var b=["setValueAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime"];const c=this.u.currentTime,d=this.u.createOscillator(),e=this.u.createGain();b=b[this.v]??b[0];d.type=this.type;a*=this.o;let f=this.h[2]*a;d.frequency.setValueAtTime(this.h[0],c);e.gain.setValueAtTime(this.i*f,c);let h=0;for(let g=0;g<this.h.length;g+=3){const l=this.h[g],m=this.h[g+
1];f=Math.max(1E-4,Math.min(this.h[g+2]*a,1));d.frequency[b](l,c+h);e.gain[b](f,c+h);h+=1/60*m}e.gain.exponentialRampToValueAtTime(.5*f,c+h);d.connect(e).connect(this.u.destination);d.start(c);d.stop(c+h);d.onended=()=>d.disconnect();this.l?.disconnect();this.l=d}};function K(a,b,c=1){("string"===typeof b?a.h(b):b)?.play(.6*c)}class ja{constructor(a,b){this.O=(c,d=1,e="square",f=2,h=.5)=>new ia(this.u,c,d,e,f,h);this.u=a;this.h=b}};function ka(a,b){a=a.L.l();const c=b.width/2-40,d=b.height/2-6;b.clear("#000000");b.setFillColor("#ffffff");b.fillRect(c,d,80,12);b.setFillColor("#000000");b.fillRect(c+1,d+1,78,10);b.setFillColor("#ffffff");b.fillRect(c+2,d+2,76*a,8)}
function L(a,b,c,d){const e=1E3/60,f=a.L.loaded();a.i=Math.min(a.i+(b-a.v),5*e);a.v=b;try{f&&!a.o&&(d?.(a.h),a.K.i?.ia?.(a.h),a.o=!0);for(b=!0;a.i>=e;a.i-=e)f&&(a.K.i?.update(a.h),a.transition.update(a.h)),b&&(a.h.input.update(),b=!1);f?(a.K.i?.ja(a.canvas),a.transition.I(a.canvas)):ka(a,a.canvas)}catch(h){void 0!==a.l&&window.cancelAnimationFrame(a.l);c?.(h);return}a.l=window.requestAnimationFrame(h=>L(a,h,c,d))}
class la{constructor(a){this.v=this.i=0;this.o=!1;this.l=void 0;this.input=new ea;this.K=new fa;this.L=new aa;this.transition=new ha;this.audio=new ja(a,b=>this.L.M.get(b));this.canvas=new E(256,192,1024,192,b=>this.L.s(b),!0);this.h=new ba(this.input,this.K,this.L,this.canvas,this.transition,this.audio)}};const ma={width:136,height:16,P:[[0,842,69,1,68,1,0,39,69,2,68,1,0,12,68,1,0,17,69,1,68,1,0,151,68,1,0,145,35,1,0,55,4,1,2,3,6,1,0,7,68,1,0,20,7,4,0,42,35,2,0,28,68,1,0,4,1,1,2,2,3,1,0,7,8,1,9,1,10,1,0,2,69,1,68,1,0,4,20,1,18,3,22,1,0,14,49,1,50,2,51,1,0,7,4,1,5,1,6,1,23,4,4,1,6,1,0,8,68,1,0,4,49,1,50,2,51,1,0,3,8,1,9,1,10,1,0,16,35,3,0,21,1,1,2,2,3,1,0,8,17,1,18,2,19,1,0,7,24,1,25,1,26,1,0,7,35,1,20,1,18,3,22,1,0,2,8,1,9,1,10,1,0,9,65,1,66,2,67,1,0,7,20,1,21,1,22,1,0,4,20,1,22,1,0,13,65,1,66,2,67,
1,0,3,24,1,25,1,26,1,0,1,8,1,9,1,10,1,0,3,1,1,2,1,3,1,0,5,35,4,0,17,1,1,2,1,3,1,0,1,17,1,18,2,19,1,0,8,17,1,18,2,19,1,0,7,40,1,41,1,42,1,0,6,35,2,20,1,18,3,22,1,0,2,24,1,25,1,26,1,0,9,65,1,66,2,67,1,0,7,20,1,21,1,22,1,0,4,20,1,22,1,0,2,4,1,6,1,0,7,36,1,37,1,65,1,66,2,67,1,0,3,40,1,41,1,42,1,0,1,24,1,25,1,26,1,0,3,17,1,18,1,19,1,0,4,35,5,0,17,17,1,18,1,19,1,0,1,17,1,18,2,19,1,0,1,7,4,0,3,17,1,18,2,19,1,0,4,35,1,0,3,41,1,0,1,38,1,39,1,0,3,35,3,20,1,18,3,22,1,0,2,40,1,41,1,42,1,0,1,8,1,9,1,10,1,0,2,
38,1,39,1,0,1,81,1,82,2,83,1,0,2,38,2,39,1,0,2,20,1,21,1,22,1,0,4,20,1,22,1,0,2,20,1,22,1,0,6,35,1,52,1,53,1,81,1,82,2,83,1,0,3,40,1,41,1,42,1,0,1,40,1,41,1,42,1,0,3,17,1,18,1,19,1,0,3,35,6,0,8,2,17,6,1,23,4,4,1,2,7,6,1,0,2,4,1,5,2,2,11,33,1,18,3,22,1,0,2,40,1,41,1,42,1,0,1,24,1,25,1,26,1,0,1,4,1,5,14,33,1,21,1,22,1,0,4,20,1,22,1,0,2,20,1,22,1,0,2,4,1,2,11,6,1,0,1,40,1,41,1,42,1,0,1,40,1,41,1,0,3,4,1,5,3,6,1,0,2,4,1,5,13,18,17,22,1,0,4,20,1,18,7,22,1,0,2,20,1,21,2,18,15,22,1,0,2,40,1,41,1,42,1,0,
1,40,1,41,1,42,1,0,1,20,1,21,16,22,1,0,4,20,1,22,1,0,2,20,1,22,1,0,2,20,1,18,11,22,1,0,1,40,1,41,1,42,1,0,1,40,1,41,1,0,3,20,1,21,3,22,1,0,2,20,1,21,13],[0,812,11,1,0,40,128,1,0,94,27,1,0,40,128,1,0,40,128,2,0,28,128,3,0,21,27,1,0,40,128,1,0,13,126,1,0,45,128,1,0,34,27,1,0,17,128,2,0,52,126,1,0,13,126,3,0,2,128,1,0,9,128,1,0,34,27,1,0,13,128,1,0,35,128,1,0,8,128,1,0,16,128,2,0,58,27,1,0,34,128,2,0,12,128,1,0,24,126,1,0,20,128,1,0,40,27,1,0,22,128,3,0,1,1,1,2,1,3,1,0,18,128,1,0,14,128,1,0,8,49,1,50,
2,51,1,0,3,36,1,37,1,0,55,27,1,0,26,17,1,18,1,19,1,0,1,126,1,0,8,126,1,0,5,126,1,0,25,81,1,82,2,83,1,0,2,35,1,52,1,53,1,0,17,126,1,0,7,38,2,39,1,0,27,43,1,0,157,127,1,0,1,127,1,0,10,127,1,0,20,127,1,0,1,127,1,0,1,127,1,0,1,127,1,0,1,127,1,0,19,127,1,0,1,127,1,0,1,127,1,0,1,127,1,0,1,127,1,0,1,127,1,0,14,127,1,0,1,127,1,0,1,127,1,0,1,127,1,0,1,127,1,0,6,127,1,0,15]]},na={width:16,height:8,P:[[257,6,0,1,257,3,0,12,257,1,0,11,257,3,261,1,0,10,257,3,0,16,262,2,0,14,258,2,0,42,263,1],[0,5,258,1,0,15,258,
1,0,12,258,1,0,1,258,1,0,15,258,1,0,14,258,2,0,14,259,2,0,43],[0,3,260,1,0,15,260,1,0,14,260,2,0,15,260,1,0,15,260,2,0,14,260,2,0,43],[0,34,259,1,0,16,259,2,0,14,257,2,0,14,257,2,0,43]]};const oa=a=>{let b=[];for(let c=0;c<a.length;c+=2)b=b.concat(Array(a[c+1]).fill(a[c]));return b};class M{get h(){return this.P.length}constructor(a){this.i=b=>Array.from(this.P[b]);this.width=a.width;this.height=a.height;this.P=Array(a.P.length);for(let b=0;b<a.P.length;++b)this.P[b]=oa(a.P[b])}};function N(a,b,c,d,e){a.h=Math.max(b,Math.min(a.h,c));const f=Math.sign(c-b);if(!(0>=d))for(0!=a.l&&(a.h=b,a.i=0,a.l=0),a.i+=e,e=0;a.i>=d;){a.i-=d;var h=a,g=b,l=c;h.h+=f;const m=Math.min(g,l);g=Math.max(g,l);h.h<m?h.h=g:h.h>g&&(h.h=m);++e;if(5<=e){a.i=0;break}}}function O(a,b){a.h=b;a.l=0;a.i=0}class P{get width(){return 16}get height(){return 16}constructor(){this.i=this.l=this.h=0}I(a,b,c,d,e=0){C(a,b,e,c,d,this.h*this.width,this.l*this.height,this.width,this.height,this.width,this.height)}};function Q(a,b,c,d){return 0>b||b>=a.h.length||0>c||0>d||c>=a.width||d>=a.height?0:a.h[b][d*a.width+c]}function pa(a,b,c){b.clear("#004992");var d=b.s?.("m");C(b,d,0,b.width-100,16);d=[1,2].map(g=>b.s?.("c"+String(g)));const e=d[0]?.width??256,f=d[0]?.height??128,h=b.width/e+3;for(let g=0;2>g;++g){const l=-a.J[g]+-(c.left/(2*(2-g))%e),m=64-48*(1-g)+-(c.top/(2*(2-g)));for(let n=-1;n<h-1;++n)C(b,d[1-g],0,n*e+l,b.height-f+m)}}
function qa(a,b,c){if(b.isActive()){var d=b.X(),e=Math.floor(d.x/16)-2;d=Math.floor(d.y/16)-2;var f=e+4,h=d+4;for(let u=e;u<=f;++u)for(let t=d;t<=h;++t)if(!(0>u||0>t||u>=a.width||t>=a.height)){var g=a.l[t*a.width+u]??0;if(0!=g){e=a;var l=b,m=u,n=t,q=c,p=16*m;const v=16*n,w=n*e.width+m;0!=(g&1)&&R(l,p+1,v,1,q);0!=(g&4)&&R(l,p+1,v+16,-1,q);0!=(g&8)&&S(l,p,v+1,14,1,q);0!=(g&2)&&S(l,p+16,v+1,14,-1,q);0!=(g&16)&&l.ga?.(p+4,v+16-4,8,4,q);0!=(g&32)&&R(l,p+1,v+16,-1,q)&&(K(q.audio,"h",.7),p=l,p.j.y+=.5*q.m,
p.speed.y=.5,e.h[0][w]+=16,e.h[1][w-e.width]=128,e.l[w-e.width]=64,e.l[w]=15,e.v.x=m,e.v.y=n,e.i=6);0!=(g&64)&&(l.sa?.(16*(m+.5),16*(n+.5),q)??!1)&&(e.h[1][w]=0,e.l[w]=0)}}b.ha?.(16*(a.height-1)+6,c);S(b,0,-128,16*a.height+128,-1,c);S(b,16*a.width,-128,16*a.height+128,1,c)}}function ra(a,b){for(let c=0;c<a.height;++c)for(let d=0;d<a.width;++d)126==a.h[1][c*a.width+d]&&b(d,c,0)}
class sa{constructor(){this.N=this.i=0;this.o=new M(ma);this.W=new M(na);this.width=this.o.width;this.height=this.o.height;this.h=Array(this.o.h);for(var a=0;a<this.o.h;++a)this.h[a]=this.o.i(a)??[];this.l=Array(this.width*this.height);for(let d=0;d<this.h.length;++d)for(let e=0;e<this.height;++e)for(let f=0;f<this.width;++f){a=f;var b=e,c=d;const h=b*this.width+a;for(let g=0;4>g;++g){const l=Q(this,c,a,b);if(!(0>=l))for(let m=0;4>m;++m){const n=((this.W.P[g]??[])[l-1]??0)-257;0>n||(this.l[h]|=1<<
n)}}}this.v=new x;this.R=new P;this.J=[0,120]}update(a){const b=[.5,1],c=2*Math.PI/60;0<this.i&&(this.i-=a.m);N(this.R,0,3,8,a.m);const d=a.L.s("c1")?.width??240;for(let e=0;e<this.J.length;++e)this.J[e]=(this.J[e]+b[e]*a.m)%d;this.N=(this.N+c*a.m)%(2*Math.PI)}};function T(a,b,c=new x,d=new x){return a.x+a.w/2+c.x>=b.x-b.w/2+d.x&&a.x-a.w/2+c.x<=b.x+b.w/2+d.x&&a.y+a.D/2+c.y>=b.y-b.D/2+d.y&&a.y-a.D/2+c.y<=b.y+b.D/2+d.y}class U{constructor(a=0,b=0,c=0,d=0){this.x=a;this.y=b;this.w=c;this.D=d}};const V=(a,b,c)=>a<b?Math.min(b,a+c):Math.max(b,a-c);function ta(a,b,c){if(a.B){var d=a.l;a.l=T(a.ba,new U(b.V/2,b.U/2,b.V,b.U),a.j,b.j);d=a.l&&a.l!=d;a.ua?.(d,b,c);a.A&&!a.l&&(a.B=!1)}}
class ua{constructor(a=0,b=0){this.B=!0;this.l=this.A=!1;this.fa=()=>this.B;this.ta=()=>this.A;this.isActive=()=>this.B&&!this.A&&this.l;this.X=()=>this.j.h();this.pa=c=>T(this.F,c.F,this.j,c.j);this.j=new x(a,b);this.$=this.j.h();this.speed=new x;this.target=new x;this.W=new x(1,1);this.ba=new U(0,0,128,128);this.F=new U(0,0,16,16);this.B=!0}update(a){this.B&&(this.l?(this.$=this.j.h(),this.A?(this.da?.(a)??!0)&&(this.A=this.B=!1):(this.ea?.(a),this.speed.x=V(this.speed.x,this.target.x,this.W.x*
a.m),this.speed.y=V(this.speed.y,this.target.y,this.W.y*a.m),this.j.x+=this.speed.x*a.m,this.j.y+=this.speed.y*a.m,this.va?.(a))):this.A&&(this.B=this.A=!1))}};function va(a,b){b=b.X();b.x-=.33*a.width;b.y-=.25*a.height;b=new x(b.x,b.y+-16);16<Math.abs(b.x-a.j.x)&&(a.C.x=b.x-16*Math.sign(b.x-a.j.x));16<Math.abs(b.y-a.j.y)&&(a.C.y=b.y-16*Math.sign(b.y-a.j.y))}function W(a,b,c){a.j.x=Math.max(0,Math.min(a.j.x,b-a.V));a.j.y=Math.max(0,Math.min(a.j.y,c-a.U));a.C.x=Math.max(0,Math.min(a.C.x,b-a.V));a.C.y=Math.max(0,Math.min(a.C.y,c-a.U))}function wa(a,b){return new x(y(b.x-a.j.x,a.V),y(b.y-a.j.y,a.U))}
class xa{get width(){return this.V}get height(){return this.U}get top(){return this.j.y}get left(){return this.j.x}constructor(a){this.V=a.la;this.U=a.ka;this.j=new x(0,0);this.C=new x(0,0)}update(a){this.V=a.la;this.U=a.ka;1>=Math.abs(this.j.x-this.C.x)&&(this.C.x=this.j.x);1>=Math.abs(this.j.y-this.C.y)&&(this.C.y=this.j.y);this.j.x=V(this.j.x,this.C.x,Math.abs(this.j.x-this.C.x)/8*a.m);this.j.y=V(this.j.y,this.C.y,Math.abs(this.j.y-this.C.y)/6*a.m)}apply(a){a.moveTo(-this.j.x,-this.j.y)}};function R(a,b,c,d,e){if(!a.isActive())return!1;const f=a.j.x+a.h.x-a.h.w/2,h=a.j.y+a.h.y+a.h.D/2*d,g=a.$.y+a.h.y+a.h.D/2*d;return f>b+14||f+a.h.w<b||0>a.speed.y*d?!1:0<d&&h>=c-1*e.m&&g<=c+(4+Math.abs(a.speed.y))*e.m||0>d&&h<=c+1*e.m&&g>=c-(4+Math.abs(a.speed.y))*e.m?(a.j.y=c-a.h.y-a.h.D/2*d,a.speed.y=0,a.qa?.(d),a.R=!0):!1}
function S(a,b,c,d,e,f){if(a.isActive()){var h=a.j.x+a.h.x+a.h.w/2*e,g=a.j.y+a.h.y-a.h.D/2,l=a.$.x+a.h.x+a.h.w/2*e;g>c+d||g+a.h.D<c||0>a.speed.x*e||!(0<e&&h>=b-1*f.m&&l<=b+(4+Math.abs(a.speed.x))*f.m||0>e&&h<=b+1*f.m&&l>=b-(4+Math.abs(a.speed.x))*f.m)||(a.j.x=b-a.h.x-a.h.w/2*e,a.speed.x=0,a.oa?.(e))}}class ya extends ua{constructor(a=0,b=0){super(a,b);this.R=!0;this.h=new U(0,0,16,16)}};class za extends ya{constructor(){super(32,216);this.S=this.T=this.N=this.o=0;this.Z=!0;this.v=this.i=0;this.Y=3;this.ca=0;this.na=()=>this.Y;this.ma=()=>this.ca;this.W=new x(.2,.125);this.h=new U(0,2,12,12);this.F=new U(0,0,16,16);this.l=!0;this.J=new P}ea(a){if(0<this.S)this.S-=a.m;else if(this.target.y=4,!(60<this.i)){var b=0;0!=(H(a.input,"l")&1)?(b=-1,this.T=1):0!=(H(a.input,"r")&1)&&(b=1,this.T=0);this.target.x=1.5*b;b=H(a.input,"j");3==b&&0<this.N?(this.o=18,this.N=0,K(a.audio,"j",.8)):0==
(b&1)&&(this.o=0);b=H(a.input,"a");this.Z&&3==b&&(this.S=15,this.o=0,r(this.speed),r(this.target),this.Z=!1,K(a.audio,"a",.8))}0<this.N&&(this.N-=a.m);0>=this.o||(this.speed.y=-2.5,this.target.y=this.speed.y,this.o-=a.m);60<this.i?O(this.J,10):0<this.S?O(this.J,7):this.R?.01>Math.abs(this.target.x)&&.01>Math.abs(this.speed.x)?O(this.J,0):N(this.J,1,4,Math.max(0,12-4*Math.abs(this.speed.x))|0,a.m):O(this.J,5+Number(0<this.speed.y));0>=this.i||(this.i-=a.m,60>=this.i&&0==this.Y&&(this.i=0,this.v=60,
this.A=!0,K(a.audio,"d",.7)));this.R=!1}da(a){return 0>=(this.v-=a.m)}qa(a){1==a?(this.N=8,this.Z=this.R=!0):this.o=0}sa(a,b,c){return!this.B||this.A?!1:T(this.F,new U(a,b,8,8),this.j)?(K(c.audio,"c",.7),++this.ca,!0):!1}ga(a,b,c,d,e,f=!0){!this.B||this.A||0<this.i||!T(this.h,new U(a+c/2,b+d/2,c,d),this.j)||(K(e.audio,"hu",.7),a=f?0==this.T?-1:1:Math.sign(this.j.x-(a+c/2)),0<this.i||(this.i=80,this.speed.x=3*a,this.o=this.S=this.target.x=0,--this.Y))}ha(a,b){this.B&&!this.A&&this.j.y+this.h.y+this.h.D/
2>a&&(this.v=60,this.Y=0,this.A=!0,K(b.audio,"d",.7))}I(a){if(this.B)if(this.A){var b=["#5555aa","#aaaaff","#ffffff"],c=[7,5,3],d=64*(1-this.v/60);for(let f=0;8>f;++f){var e=2*Math.PI/8*f;const h=this.j.x+Math.cos(e)*d;e=this.j.y+Math.sin(e)*d;for(let g=0;g<b.length;++g)a.setFillColor(b[(g+(this.v/3|0)%3)%3]),B(a,h,e,c[g])}}else 0<this.i&&60>=this.i&&0!=(this.i/2|0)%2||(b=this.j.x-8,c=this.j.y-7,d=a.s?.("p"),this.J.I(a,d,b,c,this.T),0<this.S&&C(a,d,this.T,b+15-46*this.T,c+6,128,0,32,16))}};class Aa extends ya{constructor(a,b){super(a,b);this.i=this.v=0;this.o=new P;this.target.x=-.75;this.target.y=4;this.W=new x(.2,.125);this.h=new U(0,2,12,12);this.F=new U(0,2,12,12);this.ba.w=32}da(a){return 0>=(this.i-=a.m)}oa(a){this.target.x=-Math.abs(this.target.x)*a;this.speed.x=this.target.x}ha(a,b){this.j.y+this.h.y+this.h.D/2>a&&(this.j.y=a-this.h.y-this.h.D/2,this.speed.y=-4,K(b.audio,"ej",.4))}ea(a){this.R?N(this.o,0,3,6,a.m):O(this.o,4);this.v=0<this.speed.x?1:0;this.R=!1}I(a,b){if(this.B)if(this.A){b=
1-this.i/12;var c=8+8*b,d=15*b;a.setFillColor("#FFFFFF");b=this.j.x;var e=this.j.y;d|=0;c|=0;if(!(d>=c)){b=b+a.G.x|0;e=e+a.G.y|0;for(let g=-c;g<=c;++g){var f=g/c;f=Math.round(Math.sqrt(1-f*f)*c);if(!(0>=f)){var h=0;Math.abs(g)<d&&(h=g/d,h=Math.round(Math.sqrt(1-h*h)*d));0>=h?a.u.fillRect(b-f,e+g,2*f,1):(a.u.fillRect(b-f,e+g,f-h,1),a.u.fillRect(b+h,e+g,f-h,1))}}}}else this.o.I(a,b,this.j.x-8,this.j.y-7,this.v)}};function Ba(a,b,c){for(const d of a.i)ta(d,b,c)}
class Ca{constructor(a,b){this.h=new za;va(a,this.h);a.j=a.C.h();this.i=[];ra(b,(c,d)=>{this.i.push(new Aa(16*(c+.5),16*(d+.5)))})}update(a,b,c){this.h.update(c);va(a,this.h);qa(b,this.h,c);for(let g=0;g<this.i.length;++g){var d=this.i[g];ta(d,a,c);d.update(c);qa(b,d,c);if(d.fa()&&!d.ta()){for(var e=g+1;e<this.i.length;++e){var f=d,h=this.i[e];if(!f.A&&f.B&&!h.A&&h.B&&f.pa(h)){f.target.x*=-1;h.target.x*=-1;f.speed.x=f.target.x;h.speed.x=h.target.x;const l=(f.j.x+h.j.x)/2,m=Math.sign(f.speed.x);f.j.x=
l+f.F.w/2*m;h.j.x=l-f.F.w/2*m}}f=d;h=this.h;d=c;!f.A&&f.B&&(e=10>=h.S?void 0:new U(h.j.x+16-32*h.T,h.j.y+8,16,10),void 0!==e&&T(f.F,e,f.j)?(f.i=12,f.A=!0,K(d.audio,"k",.6)):h.ga(f.j.x-f.F.x-f.F.w/2,f.j.y-f.F.y-f.F.D/2,f.F.w,f.F.D,d,!1))}}if(2120<this.h.X().x)throw K(c.audio,"e",.6),Error("Sorry, didn't have room for an ending!\n");}I(a){const b=a.s?.("e");for(const c of this.i)c.I(a,b);this.h.I(a)}};class Da{constructor(a){this.h=new xa(a);this.i=new sa;this.l=new Ca(this.h,this.i);W(this.h,16*this.i.width,16*this.i.height)}ia(a){J(a.transition,!1,1,1/30)}update(a){a.transition.isActive()?(this.h.update(a),Ba(this.l,this.h,a),this.i.update(a)):(this.i.update(a),this.l.update(this.h,this.i,a),this.h.update(a),W(this.h,16*this.i.width,16*this.i.height),this.l.h.fa()||J(a.transition,!0,2,1/45,b=>{this.i=new sa;this.l=new Ca(this.h,this.i);W(this.h,16*this.i.width,16*this.i.height);b.transition.aa=
wa(this.h,this.l.h.X())},"#000000",wa(this.h,this.l.h.X())))}ja(a){a.moveTo();pa(this.i,a,this.h);this.h.apply(a);var b=this.i,c=this.h,d=a.s?.("ts"),e=(c.left/16|0)-1;const f=(c.top/16|0)-1,h=e+(c.width/16|0)+2;c=f+(c.height/16|0)+2;for(let u=0;u<b.h.length;++u)for(let t=f;t<=c;++t)for(let v=e;v<=h;++v){var g=Q(b,u,v,t);if(0!=g){if(112<=g){var l=b,m=a,n=v,q=t;switch(g){case 127:var p=m.s?.("g");for(let w=0;32>w;++w)C(m,p,0,16*n+w,16*q+3+Math.round(2*Math.sin(l.N+2*Math.PI/32*w)+Math.sin(Math.PI/
8*w)),56+n%8,32,1,16);break;case 128:p=m.s?.("c"),l.R.I(m,p,16*n,16*q)}}l=(g-1)%16;g=(g-1)/16|0;m=0;0<b.i&&b.v.x==v&&b.v.y==t&&(m=-Math.round(2*Math.sin(b.i/6*Math.PI)));C(a,d,0,16*v,16*t+m,16*l,16*g,16,16)}}this.l.I(a);a.moveTo();b=a.s?.("h");d=this.l.h.na();for(e=0;3>e;++e)C(a,b,0,2+14*e,2,d>e?0:16,0,16,16);d=this.l.h.ma();e=a.s?.("fo");D(a,e,(10>d?"#0":"#")+String(d),a.width-2,1,-7,0,2);C(a,b,0,a.width-2-48,2,32,0,16,16)}};const Ea=(a,b)=>{const c=document.createElement("canvas");c.width=a;c.height=b;return c},Fa=a=>{const b=[];for(let c=0;c<a.length;++c){const d=a[c].length/2|0;b.push(Array(d));for(let e=0;e<d;++e)b[c][e]=parseInt(a[c].substring(2*e,2*e+2),16)}return b},Ga=(a,b,c,d,e,f)=>{for(let h=c;h<c+8;++h)for(let g=b;g<b+8;++g){const l=h*d+g,m=f[e[a.data[4*l]/85|0]]??[];for(let n=0;4>n;++n)a.data[4*l+n]=m[n]??255}},Y=(a,b)=>{var c=X;if(void 0!==a){var d=Ea(a.width,a.height),e=d.getContext("2d");if(null!==e){e.drawImage(a,
0,0);var f=e.getImageData(0,0,a.width,a.height),h=d.width/8|0,g=d.height/8|0;c=Fa(c);var l=0;for(let m=0;m<g;++m)for(let n=0;n<h;++n){if(l>=b.length)continue;const q=(b[l]??"0000").split("").map(p=>parseInt(p,32));Ga(f,8*n,8*m,a.width,q,c);++l}e.putImageData(f,0,0);return d}}},Ha=(a,b,c,d)=>{const e=Ea(d,16);e.getContext("2d").drawImage(a,b,c,d,16,0,0,d,16);return e};const X="00000000 000000ff ffffffff 6d6d6dff b6b6b6ff 499200ff 92db00ff ffff92ff db6d00ff ffb66dff db9249ff 2449b6ff 4992ffff 92dbffff ffdb92ff 924900ff b62400ff ff4900ff ff9200ff b6b6ffff ffdb00ff ffb600ff ff6d00ff".split(" "),Ia="1068 1068 1068 1068 1068 10A9 10A9 1089 8057 8057 8057 1068 1068 10A9 10A9 0007 1032 1031 1032 0057 0057 1068 1068 1089 1032 1031 B002 8057 8057 7095 7005 1098 10BD 10BD 0002 10FE 10FE 1007 1007 G7LM 10BD 10BD 1043 10FE 10FE 1007 1007 G7LM 10HG 10HG 10HG 10HG 000I 1IE2 1IE2 10L7 10HG 10HG 10HG 10HG 10E2 10E2 10E2 000I 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 10J2 1089 10IK 107K 10IK 10IK 10IK 10J2 10J2 1042 1042 10IK 10IK 10IK 10IK 0000 0000 10J2 10J2 0000 0000 0000 0000 0000 0000 10J2 10J2 0000 0000 0000 0000".split(" "),
Z=[0,16,32,48,32,16,32,0],Ja=[72,64,64,64,64,72,72,88];class Ka{constructor(){this.h=0}update(a){if(a.input.ra){K(a.audio,"s",.4);var b=a.K;const c=b.K.g;void 0!==c&&(c?.ia(a),b.h=c)}this.h=(this.h+1/60*a.m)%1}ja(a){a.clear("#000000");const b=a.s?.("fw"),c=a.s?.("fy"),d=a.width/2;D(a,b,"TINY-PLATFORMER-13K",d,32,-1,0,1);D(a,b,"PROTOTYPE",d,42,-1,0,1);D(a,b,"ARROW KEYS: MOVE\nSPACE OR Z: JUMP\nLCTRL OR X: ATTACK\n",d-56,92,-1,4,0);.5>=this.h&&D(a,c,"PRESS ANY KEY",d,a.height-32,-1,0,1)}};const La=a=>{G(a.input,"l",["ArrowLeft"]);G(a.input,"r",["ArrowRight"]);G(a.input,"j",["Space","KeyZ"]);G(a.input,"a",["ControlLeft","KeyX"]);I(a.K,"g",new Da(a),!1);I(a.K,"t",new Ka,!0);var b=a.L;a=a.audio;var c=b.s("_g");c=Y(c,Ia);b.H.set("g",c);c=b.s("g");var d=new E(256,256);for(var e=0;2>e;++e){for(var f=0;4>f;++f)for(var h=0;6>h;++h){if(0==f%2&&0==h%2){var g=0==h?2:0;C(d,c,0,48*e+8*h+g,8*f,40,0,16-g-(4==h?2:0),16)}if(0==h||5==h)0==e?(g=0==f?1:0,0==h&&C(d,c,0,8*h,8*f+g,56,0,4,8-g),5==h&&C(d,
c,0,8*h+4,8*f+g,60,0,4,8-g)):0<f&&(g=h&1,C(d,c,0,48+8*h,8*f,24+8*g,8,8,8),C(d,c,0,48+8*h+(1-2*g),8*f,24+8*g,24,8,8));0==f&&(0==e||0<h&&5>h?(g=0==h?0:5==h?16:8,C(d,c,0,48*e+8*h,8*f,g,0,8,8),C(d,c,0,48*e+8*h,8*f+1,g,8,8,8)):(g=0==h?24:32,C(d,c,0,48*e+8*h,8*f,g,0,8,8),C(d,c,0,48*e+8*h,8*f,g,16,8,8)))}C(d,c,0,16*e,32,40,0,16,16);C(d,c,0,24*e,32,40+8*e,16,8,8);C(d,c,0,24*e,32,40+8*e,24,8,8)}d.setFillColor("#"+X[4]);d.fillRect(33,33,14,14);C(d,c,0,32,32,0,16,16,16);d.fillRect(49,33,30,30);d.setFillColor("#"+
X[12]);d.fillRect(1,49,46,46);for(e=0;4>e;++e)C(d,c,0,54+6*e,32,5,16,6,4),C(d,c,0,54+6*e,60,5,28,6,4),C(d,c,0,48,38+6*e,0,21,4,6),C(d,c,0,76,38+6*e,12,21,4,6),C(d,c,0,0,56+8*e,0,36,8,8),C(d,c,0,40,56+8*e,8,36,8,8),C(d,c,0,8+8*e,48,4,32,8,8),C(d,c,0,8+8*e,88,4,40,8,8);for(e=0;2>e;++e){for(f=0;2>f;++f)C(d,c,0,48+26*e,32+26*f,10*e,16+10*f,6,6),C(d,c,0,40*e,48+40*f,8*e,32+8*f,8,8),C(d,c,0,2+36*e,50+37*f,16,24,8,8),d.setFillColor("#"+X[10]),d.fillRect(16*e+49,16*f+65,14+e,14),C(d,c,0,48+16*e,64+16*f,24,
32,16-3*e,16),1==e&&C(d,c,0,16*e+59,64+16*f,34,32,5,16),C(d,c,0,48+16*e,16*f+67,40,32+10*f,16,6*f+10*(1-f));C(d,c,0,55+10*e,43,16,16,8,8)}C(d,c,0,128,12,40,48,16,8);for(e=0;8>e;++e)C(d,c,0,128,16+4*e,40,52,16,4);C(d,c,0,124,18,32,56,24,8);C(d,c,0,138,18,56,56,8,8);C(d,c,0,112,0,0,48,16,16);C(d,c,0,128,0,8,48,16,16);C(d,c,0,144,0,16,48,16,16);C(d,c,0,113,1,32,48,8,8);d.setFillColor("#"+X[18]);d.fillRect(120,1,35,1);d.setFillColor("#000000");for(e=0;2>e;++e)C(d,c,0,96+8*e,13,56,16,8,16),C(d,c,0,96+
8*e,18,56,8,8,8),C(d,c,0,80+8*e,40,16,40,8,8),C(d,c,0,80+8*e,40,16,32,8,8),d.fillRect(84+8*e,39,1,1),d.fillRect(96,46,1,2);C(d,c,0,166,40,16,40,5,8);C(d,c,0,171,40,20,40,4,8);C(d,c,0,166,40,16,32,8,8);d.fillRect(175,46,1,2);d.fillRect(169,8,4,33);d.setFillColor("#db6d00");d.fillRect(170,8,2,32);d.setFillColor("#ffb66d");d.fillRect(170,8,1,32);C(d,c,0,168,0,56,48,8,8);C(d,c,0,162,0,24,80,8,8);b.H.set("ts",d.h());c=b.s("g");d=b.s("_g");e=new E(176,32);for(f=0;f<Z.length;++f)6>f&&C(e,c,0,16*f,0,0,64,
16,8),C(e,c,0,16*f,8,Z[f],Ja[f],16,8);C(e,c,0,96,0,48,72,16,8);C(e,c,0,112,0,0,80,16,8);for(f=0;2>f;++f)C(e,c,0,128+2*f,0,16,80+8*f,8+8*f,8);C(e,c,0,160,0,16,96,16,16);b.H.set("p",e.h());e=new E(64,16);C(e,c,0,0,0,32,80,16,16);C(e,c,0,19,0,48,80,10,16);C(e,c,0,37,0,58,80,6,16);C(e,c,1,51,0,48,80,10,16);b.H.set("c",e.h());e=new E(80,16);d=Y(Ha(d,16,64,48),Array(12).fill("10L7"));for(f=0;5>f;++f)C(e,d,1,16*f+1,8,Z[f+1]-16,Ja[f+1]-64,16,8),C(e,c,0,16*f+5,0,56,48,8,8),C(e,c,0,16*f-1,0,24,80,8,8);b.H.set("e",
e.h());c=["#92dbff","#4992db"];for(f=0;f<c.length;++f){d=b;e="c"+String(f+1);g=c[f];h=new E(240,120);h.setFillColor(g);for(g=0;240>g;++g){var l=(g%24-12)/14;l=1+16*(1-Math.sqrt(1-l*l)+1.5*(1+Math.sin(g/240*Math.PI*2)));h.fillRect(g,l,1,120-l+1)}d.H.set(e,h.h())}c=new E(80,80);c.setFillColor("#ffb649");B(c,40,40,40);c.setFillColor("#ffffb6");B(c,38,38,38);c.setFillColor("#004992");B(c,20,30,32);b.H.set("m",c.h());e=Ha(b.s("_g"),0,96,16);c=b.s("g");d=Y(e,Array(4).fill("10GM"));e=Y(e,Array(4).fill("1034"));
f=new E(48,16);C(f,d,0,0,0);C(f,e,0,16,0);C(f,c,0,32,0,32,80,16,16);b.H.set("h",f.h());f=b.s("_f");c=Y(f,Array(128).fill("0001"));d=Y(f,Array(128).fill("0002"));e=new E(256,64);b.H.set("fw",d);f=Y(f,Array(128).fill("000K"));b.H.set("fy",f);for(f=0;4>f;++f)for(h=0;16>h;++h){g=16*h+4;l=16*f+6;for(let m=-1;1>=m;++m)for(let n=-1;1>=n;++n)C(e,c,0,g+m,l+n,8*h,8*f,8,8);C(e,d,0,g,l,8*h,8*f,8,8)}b.H.set("fo",e.h());for(f=0;2>f;++f)c=b,d=0==f?"j":"ej",e=a.O([64,6,.2,112,5,.6,160,4,.7,224,3,.5],.8,"sawtooth",
2,.2),c.M.set(d,e);c=a.O([160,4,.6,100,2,.8,256,12,1],.4,"square",0,.2);b.M.set("c",c);c=a.O([80,5,1,96,4,.6,112,3,.4],.6,"square",0,.4);b.M.set("h",c);c=a.O([192,3,.9,144,5,1,96,3,.5],.65,"sawtooth",1,.2);b.M.set("a",c);c=a.O([128,4,1,96,3,.9,80,8,.6],.5,"square",2,.3);b.M.set("hu",c);c=a.O([64,2,.5,96,3,.75,176,4,1,112,8,.8,80,32,.6,64,8,.2],.5,"square",1,.2);b.M.set("d",c);c=a.O([160,3,.8,224,4,1,192,6,.8,96,10,.4],.6,"sawtooth",1,.3);b.M.set("k",c);c=a.O([128,10,1,96,6,.2],.6,"square",0,.4);b.M.set("s",
c);a=a.O([112,4,.5,160,4,1,112,5,1,160,5,1,112,6,1,160,6,1,112,7,1,160,7,1,112,8,.8,160,8,.8,192,32,.5],.6,"square",1,.4);b.M.set("e",a)},Ma=a=>{console.log(a.stack);document.getElementById("d")?.remove();const b=document.createElement("b");b.setAttribute("style","color: rgb(224,73,73); font-size: 1.5em");b.innerText="Fatal error:\n\n "+a.message;document.body.appendChild(b)};
function Na(){return new Promise(a=>{window.addEventListener("keydown",b=>{b.preventDefault();document.getElementById("i")?.remove();b=new AudioContext;a(b)},{once:!0})})}window.onload=()=>(async()=>{document.getElementById("it").innerText="Press Any Key to Start";const a=await Na();try{var b=new la(a),c=b.h;k(c.L,"_f","assets/font.png");k(c.L,"_g","assets/gameart.png");L(b,0,Ma,La)}catch(d){Ma(d)}})();
